# XMind2TestCase - 现代化测试用例管理平台

XMind2TestCase 是一个基于 FastAPI 构建的现代化测试用例管理工具。它能将 XMind 思维导图智能转换为测试用例，支持在线管理、编辑、预览，并可导出为 TestLink、ZenTao (禅道) 和 XMind 格式。

## ✨ 核心特性

### 🚀 智能转换
- **XMind 解析**: 支持 XMind 8 和 XMind Zen 格式。
- **自动识别**: 智能识别测试用例优先级、步骤和预期结果。
- **即时预览**: 解析后立即预览测试用例详情。

### 📝 在线管理
- **项目管理**: 创建及管理多个测试项目，支持按项目归档。
- **在线编辑**: 
  - 支持直接在浏览器中编辑测试用例标题、步骤和预期结果。
  - **即时备注**: 预览页新增“备注”列，支持在线记录测试执行情况。
  - **便捷重命名**: 点击文件名即可快速重命名。
- **智能保存**:
  - **自动保存**: 编辑内容（包括备注、结果、步骤）后自动异步保存，无需手动点击。
  - **防丢失**: 刷新页面或复制结果前确保数据已持久化。
- **结果记录**:
  - **执行状态**: 支持标记用例执行结果（通过、失败、阻塞、跳过）。
  - **复制汇总**: 一键复制格式化的执行结果汇总，自动包含最新的执行状态和备注信息。

### 📤 多格式导出
- **Excel/CSV**: 完美适配禅道 (ZenTao) 导入格式。
- **XML**: 支持 TestLink 用例导入。
- **XMind**: 支持将编辑后的用例导回为 XMind 格式，保持层级结构。
- **一键打包**: 支持一键下载所有格式的压缩包 (ZIP)。

### 🎨 现代化 UI
- **Glassmorphism**: 采用现代化的磨砂玻璃风格设计。
- **响应式设计**: 完美适配桌面和移动端设备。
- **交互优化**: 
  - 实时保存编辑内容，并在按钮上给出可视化反馈。
  - 智能的 Toast 提示。
  - 平滑的过渡动画。

## 🛠️ 技术栈

- **后端**: FastAPI + Python 3.13 + SQLite
- **前端**: HTML5 + Vanilla JS + CSS3 (Modern Flexbox/Grid)
- **依赖管理**: uv (高性能 Python 包管理器)
- **部署**: Uvicorn (ASGI 服务器)

## 🚀 快速开始

### 1. 环境准备

确保已安装 Python 3.8+ 和 `uv` (推荐)。

```bash
# 如果未安装 uv
pip install uv
```

### 2. 安装依赖

```bash
uv sync  # 自动安装所有依赖到虚拟环境
```

### 3. 运行服务

我们提供了一个方便的启动脚本：

```bash
bash run.sh
```

- **开发模式**: `bash run.sh dev` (默认，带自动重载)
- **生产模式**: `bash run.sh prod`

服务将启动在 `http://127.0.0.1:8000`。

> 提示：首次运行时会自动初始化数据库 `data.db3` 并填充默认配置。

## 📁 项目结构

```
xmind2testcase/
├── app/
│   ├── api/               # API 路由 (FastAPI Routers)
│   ├── core/              # 核心配置 (Config, Database)
│   ├── lib/               # 核心转换库 (XMind解析逻辑)
│   ├── services/          # 业务逻辑服务
│   ├── static/            # 静态资源 (CSS, JS, Images)
│   │   ├── css/          # 样式表
│   │   └── js/           # ✨ 分页组件等
│   └── templates/         # HTML 模板 (Jinja2)
├── logs/                  # 日志文件目录
├── uploads/               # 文件上传目录
├── data.db3               # SQLite 数据库
├── run.sh                 # 启动脚本
├── pyproject.toml         # 依赖及项目配置
└── README.md              # 说明文档
```

## 📖 使用指南

### 1. 编写测试用例 (XMind)

请遵循简单的编写规范：
- **中心主题**: 即测试集名称（或产品名称）。
- **分支节点**: 模块或功能名称（支持多级）。
- **用例节点**: 必须标记优先级（Priority 1/2/3）才会被识别为测试用例。
- **子节点**: 自动识别为"测试步骤"。
- **孙节点**: 自动识别为"预期结果"。

### 2. 系统配置

访问右上角的 **⚙️ 系统配置**：
- **项目管理**: 添加或管理项目（项目删除需在此处进行）。
- **标签管理**: 自定义测试阶段和用例类型。
- **功能开关**: 开启/关闭禅道或 TestLink 导出按钮。

### 3. 常用操作

- **上传**: 在首页或项目详情页上传 XMind 文件。
- **预览与执行**:
  - 在预览页直接标记测试结果（Pass/Fail）。
  - 在“备注”列记录问题或说明。
  - 系统会自动保存您的所有更改。
  - 点击“复制执行结果”可生成汇总报告用于周报或沟通。
- **导出**: 支持导出为 ZenTao CSV 或 TestLink XML 供导入到相应系统。

## 🤝 贡献与反馈

欢迎提交 Issue 或 Pull Request 来改进这个项目！

## 📄 许可证

Apache License 2.0